/**
 * Javascript Class Helper
 * @author Tom Flidr | tomflidr(at)gmail(dot)com
 * @version 1.0
 * @date 2016-07-15
 * @usage
var ClassName = Class({
	Extend: ParentClassName,
	Static: {
		staticMethod: function () {
			// call parent static method with same name
			this.parent(param1, param2, ...);
			// call any other parent static method
			this.parent.otherParentStaticMethod(param1, param2, ...);
		}
	},
	Constructor: function () {
		// call parent Constructor
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	},
	dynamicMethod: function () {
		// call parent dynamic method with same name
		this.parent(param1, param2);
		// call any other parent dynamic method
		this.parent.otherParentDynamicMethod(param1, param2, ...);
	}
});
*/
var Class=(function(m){function a(){var c=[].slice.apply(arguments);return"string"==typeof c[0]?a.l(c[0],1<c.length?c[1]:{}):a.j(c[0],"Class")}Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');}var b=[].slice,c='prototype',d=b.call(arguments,1),e=this,f=function(){},g=function(){return e.apply(this instanceof f?this:a,d.concat(b.call(arguments)))};if(this[c]){f[c]=this[c]}g[c]=new f();return g});a.Constants={ClassImprint:"$classImprint",InstanceImprint:"$instanceImprint",Extend:"Extend",Static:"Static",Constructor:"Constructor",Name:"Name",self:"self",parent:"parent"};a.a={};for(var n in a.Constants){a.a[a.Constants[n]]=!0}a.ClassImprintBaseName="class{0}";a.InstanceImprintBaseName="instance{0}";a.c=0;a.f=0;a.g=[{},{}];a.h={};a.Create=function(a,d){for(var b=a.split("."),e,f=m,g=0,h=b.length;g<h;g+=1){e=b[g];if(!(e in f)){throw Error("Class '"+a+"' doesn't exist!");}f=f[e]}d.unshift(f);return new(f.bind.apply(f,d))};a.Define=function(c,d){return a.l(c,d||{})};a.l=function(c,d){for(var b=c.split("."),e=b[b.length-1],f="",g=m,h=0,k=b.length-1;h<k;h+=1){f=b[h],f in g||(g[f]={}),g=g[f]}d.toString==={}.toString&&(d.toString=function(){return"[object "+this.self.Name+"]"});b=a.j(d,e);return g[e]=b};a.j=function(c,d){function Class(){return a.B(c,this,[].slice.apply(arguments))}var b=Class,e=a.Constants,f=e.Extend,g=e.Name,h=e.ClassImprint,e=e.self,k="",l="";c[f]&&("function"==typeof c[f][h]?l=c[f][h]():(l=a.i(),c[f][h]=function(){return l}));k=a.i();b[h]=function(){return k};a.s(b,c);a.u(b,c);a.C(b,c);a.D(b,c);b[e]=b;c[f]&&(b[e][f]=c[f],a.h[k]=l);b.prototype[e]=b;a.m(b);b[g]=d;return b};a.B=function(c,d,b){var e=a.Constants,f=e.Constructor,g="";if(d===m){if("function"==typeof c[f]){c[f].apply(d,b)}else{throw Error("Class definition is not possible to call as function, it's necessary to create instance with 'new' keyword before class definition.");}}else{return g=a.A(),d[e.InstanceImprint]=function(){return g},a.F(d),d[f].apply(d,b)}};a.i=function(){var c=a.ClassImprintBaseName.replace("{0}",a.c);a.c+=1;return c};a.A=function(){var c=a.InstanceImprintBaseName.replace("{0}",a.f);a.f+=1;return c};a.s=function(c,d){function Prototype(){}var b=Prototype,e=a.Constants,f=e.Name,g="";if(e=d[e.Extend]){e&&(b.prototype=e.prototype),c.prototype=new b}e=c.prototype;for(g in e){"string"!=typeof e[g][f]&&(e[g][f]=g)}};a.u=function(c,d){var b="",e=a.Constants,f=e.Name;if(e=d[e.Extend]){for(b in e){!0!==a.a[b]&&(c[b]=e[b],c[b][f]=b)}}};a.C=function(c,d){var b=c.prototype,e=a.Constants,f=e.Name,g=e.Constructor,h="";for(h in d){!0!==a.a[h]&&(b[h]=d[h],b[h][f]=h)}d[g]&&(b[g]=d[g],b[g][f]=g);b[e.InstanceImprint]=function(){return""}};a.D=function(c,d){var b="",e=a.Constants,f=e.Name;if(e=d[e.Static]){for(b in e){!0!==a.a[b]&&(c[b]=e[b],c[b][f]=b)}}};a.F=function(c){var d=a.Constants,b=d.Name,e=d.parent,f=d.self,g="",h=c[f],d=h[f][d.Extend];h.prototype[e]=function(){return a.b(this,arguments.callee.caller[b],[].slice.apply(arguments),0)};e=h.prototype[e];if(d){for(g in h=d.prototype,h){"function"==typeof h[g]&&!0!==a.a[g]&&(e[g]=a.G(c,g))}}};a.G=function(c,d){return function(){return a.b(c,d,[].slice.apply(arguments),0)}};a.m=function(c){var d=a.Constants,b=d.Name,e=d.parent,f="",d=c[d.Extend];c[e]=function(){return a.b(this,arguments.callee.caller[b],[].slice.apply(arguments),1)};e=c[e];if(d){for(f in d){"function"!=typeof d[f]||a.a[f]||(e[f]=a.o(c,f))}}};a.o=function(c,d){return function(){return a.b(c,d,[].slice.apply(arguments),1)}};a.b=function(c,d,b,e){var f=a.Constants,g=f.ClassImprint,h=f.InstanceImprint,f=f.self,h=c[e?g:h](),f=c[f],g=f[g](),g=a.w(g,h,e),g=a.v(f,g),g=e?g[d]:g.prototype[d],f=typeof g;if("undefined"==f){try{throw"No parent method named: '"+d+"'.";}catch(k){console.log(k.stack)}}else{if("function"!=f){throw"Parent method '"+d+"' is not a function.";}}c=g.apply(c,b);delete a.g[e][h];return c};a.w=function(c,d,b){b=a.g[b];"undefined"==typeof b[d]&&(b[d]=c);c=a.h[b[d]];if(!c){throw Error("No parent class defined.");}return b[d]=c};a.v=function(c,d){for(var b=a.Constants,e=b.Extend,b=b.ClassImprint,f=!1,g;"undefined"!=typeof c[e];){g=c[e];if(g[b]()==d){f=!0;break}c=g}if(!f){throw Error("No parent class definition found for class imprint: '"+d+"'.");}return g};m.Class=a;return a})(Boolean(typeof(module)!=='undefined'&&module.exports)?global:this);